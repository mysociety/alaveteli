<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }} | Alaveteli | mySociety</title>
    <link rel="stylesheet" href="{{ site.baseurl }}assets/css/global.css">
    <link rel="stylesheet" href="{{ site.baseurl }}assets/css/alaveteli-org.css">
    <link href="/atom.xml" rel="alternate" title="Alaveteli" type="application/atom+xml">
    <link rel="icon" type="image/png" href="{{ site.baseurl }}assets/img/favicon.png" />
    <meta name="viewport" content="initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,900,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-24633320-1', 'alaveteli.org');
      ga('send', 'pageview');

        (function() {
          var cx = '012469947838795749698:abakbfgsmqm';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +

              '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();

    </script>
  </head>
  <body>

  <div class="ms-header">
    <nav class="ms-header__row">
       <a class="ms-header__logo" href="http://www.mysociety.org">mySociety</a>
    </nav>
  </div>

  <header class="site-header">
    <div class="container">
      <a href="{{ site.baseurl }}" class="site-title"><h1>Alaveteli</h1></a>
      <div class="nav-position">
        <nav role="navigation" class="site-nav nav-collapse">
          <ul>
            <li><a href="{{ site.baseurl }}about/">About</a></li>
            <li><a href="{{ site.baseurl }}docs/getting_started/">Get started</a></li>
            <li><a href="{{ site.baseurl }}docs/">Documentation</a></li>
            <li><a href="{{ site.baseurl }}blog/">Blog</a></li>
            <li><a href="{{ site.baseurl }}community/">Contact</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

    {{ content }}

  <footer>


    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="{{ site.baseurl }}assets/scripts/responsive-nav.min.js"></script>
    <script>
      var nav = responsiveNav(".nav-collapse");
    </script>
    <script src="{{ site.baseurl }}assets/scripts/svgeezy.js"></script>
    <script>
      svgeezy.init('nocheck', 'png'); // this will tell the plugin to not check images with a class of 'nocheck'
    </script>
    <script>
      function replace_str(base, replacement) {
        return base + replacement; // FIXME TODO should replace %s
      }

      $(function(){

        $('.reveal-on-click dd').hide();
        $('.reveal-on-click dt').on('click', function(){
          // $(this).find('+ dd').toggle();
          var $dd = $(this).find('+ dd');
          if ($dd.is(':visible')) {
            $(this).removeClass('revealed');
            $dd.slideUp();
          } else {
            $(this).addClass('revealed');
            $dd.slideDown();
          }
        });

        var reveal_all_text = {'reveal': 'Show all ', 'hide': 'Collapse all '}; // TODO add %s

        $('dl.reveal-on-click').each(function(){
          $(this).before("<div class='reveal-all revealed'>&nbsp;</div>");
        });
        $('.reveal-all').on('click', function(){
          console.log("reveal all clicked");
          var $dl = $(this).find('+ dl.reveal-on-click');
          var noun = $dl.data('reveal-noun');
          if ($(this).hasClass('revealed')) {
            console.log("hiding all");
            $dl.find('dt').removeClass('revealed');
            $dl.find('dd').slideUp();
            $(this).removeClass('revealed');
            $(this).text(replace_str(reveal_all_text['reveal'], noun));
          } else {
            console.log("showing all");
            $dl.find('dt').addClass('revealed');
            $dl.find('dd').slideDown();
            $(this).addClass('revealed');
            $(this).text(replace_str(reveal_all_text['hide'], noun));
          }
        });
        $('.reveal-all').trigger('click');
      });
    </script>
  </body>
</html>
